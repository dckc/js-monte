<!doctype html>
<html>

<head>
  <title>js-monte</title>
  <meta charset="utf-8"/>
</head>

<body>
  <h1>Monte / JavaScript</h1>

  <textarea id='AST' rows='20' cols='50'></textarea>
  <br />
  <button id='go'>Deserialize</button>

  <pre id="output">
...
  </pre>
  <pre id="estree">
  </pre>
  <pre id="jsout">
  </pre>
  <pre id="error" style="color: red">
    ...
  </pre>
  <p>See also: <a href="kernel_test.html">kernel testing</a>.</p>

  <hr />
  <address>
    Copyright (c) 2015 <a href="http://www.madmode.com/">Dan Connolly</a><br />
    Share and enjoy under the terms of
    MIT Open Source License.
  </address>

  <script type="text/javascript" src="jspm_packages/system.js"></script>
  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript">
  System.import('ast_fmt1').then(function(fmt) {
  System.import('jstarget').then(function(jstarget) {
  System.import('escodegen').then(function(escodegen) {
    function gebi(i) { return document.getElementById(i); };
    function go() {
       var ast, estree;

       gebi('output').textContent = "";
       gebi('error').textContent = "";
       gebi('estree').textContent = "";
       gebi('jsout').textContent = "";

       try {
         ast = fmt.load(gebi('AST').value)[0];
         gebi('output').textContent = JSON.stringify(ast, '    ');
         estree = jstarget.toESTree(ast);
         gebi('estree').textContent = JSON.stringify(estree);
         gebi('jsout').textContent = escodegen.generate(estree);
       } catch(e) {
         console.log(e);
         gebi('error').textContent = e.message;
  
       }
    }

    gebi('go').addEventListener('click', go);
  })})});

  </script>
</body>

</html>
